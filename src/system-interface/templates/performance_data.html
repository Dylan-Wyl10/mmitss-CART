
{% extends "base.html" %}

{% block content %}

<script src="https://unpkg.com/htmx.org@1.6.0" integrity="sha384-G4dtlRlMBrk5fEiRXDsLjriPo8Qk5ZeHVVxS8KhX6D7I9XXJlNqbdvRlp9/glk5D" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<style>
    .diagram_list{

        height:200px;
        width: auto;
        overflow-y: scroll;
        float:right;
        border: 2px solid black;
        background-color: white;
        
    }

    a.redirect{

        color:black ;
        font-size: 25px;
        background-color: rgb(219, 217, 217);
        position:relative; left:50px; top:100px;
        padding: 10px;
        border-radius: 25px;
    }


    ul.a {
        list-style-type: none;
        margin: 0;
        padding: 5px;
    }


    ul.a li:hover{
        display: block;
        color: white;
        background-color: #507a77;
    }
    
    h1.noData{
        position:relative; left:250px; top:100px;
    }
    
    h4{
        color: seashell;
        font-weight: bold;
    }
    table.imgTd td {
      border: 2px solid gray;
      background-color: #afc5c3;
      width: auto;
      padding: 10px;
      margin-left:auto; 
      margin-right:auto;
     
    }


    img {
    width: 550px;
    padding: 20px;

    }

    table, td {
      border: 1px solid gray;
      width: 800px;
      background-color: #afc5c3;
      padding: 15px;
      margin-left:auto; 
      margin-right:auto;
     
    }
    th {
        color:azure;
        background-color: rgba(70, 192, 155, 0.884);
        padding: 15px;
        
    }
    td:nth-child(even) {
        background-color: #fffdfd;
        
        }
    .header{
        text-align: center;

    }
    b {
        margin-left: 24%;
        font-size: 25px;
    }
    
</style>

<div class="container">
    <div class="page-header">
        <h1>Performance Data</h1>
    </div>
    <form method="post">
        <div role="tabpanel">
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#tables" aria-controls="tables" role="tab" data-toggle="tab">Tables</a></li>
                <li role="presentation"><a href="#diagrams" aria-controls="diagram" role="tab" data-toggle="tab">Time Phase Diagrams</a></li>
            </ul>

            <div class="tab-content">

                <div id="tables" role="tabpanel" class="tab-pane fade in active">
                {% if time != 0 %}
                <div class="header">
                        <h1>Performance Data: {{platform}}</h1><br>
                        Last refreshed : {{time}}
                        <hr>
                </div>
                <div><b>Messages Transmitted</b>
                    {{tables1 | safe}}</div>
                <br>
                <br>
                <div><b>Messages Received</b>
                    {{tables2 | safe}}
                    <br><br>
                </div>
                {% else %}
                <h1 class="noData">No Performance Data Available</h1>
                {% endif %}
                </div>

                
                
                <script>
                $(document).ready(function(){
                    setInterval(function(){
                        $("#tables").load(" #tables > *");
                        console.log("reload...") ;
                    }, 30000);
                    });
                </script>





        

                <div role="tabpanel" class="tab-pane fade" id="diagrams">

                    {% if diagrams %}
                    <table class="imgTd"><tr><td>
                        <h4 id='highlight'>{{diagrams[0]}}</h4>
                        <img src="/nojournal/bin/performance-measurement-diagrams/time-phase-diagram/{{diagrams[0]}}" alt="No time phase diagrams were found" width="600" height="500" id="picture">
                    </td>
                    <td>                  
                        
                        
                
                
                    <div class="diagram_list" id="list">
                        <ul class = "a">

                            {% for diagram in diagrams %}
                            <li id="imgList" onclick="changeDiagram( '{{ diagrams[loop.index -1] }}','{{loop.index -1}}' )">{{diagram}}</li>
                            {% endfor %}

                        </ul>
                        
                    </div>
                    </td></tr></table>
                    {% else %}
                    <a class="redirect" href="../configuration">No Time Phase Diagrams Available â€“ Enable Generation in the System Configuration tab</a>
                    {% endif %}


                </div>
            </div>


        </div>
    </form>
</div>




<script type="text/javascript">


$(document).ready(function(){
setInterval(function(){
    $("#list").load(" #list > *");
    console.log("reloading...") ;
}, 30000);
});

function changeDiagram(Img,Int){
    
    console.log(Img);
    var newImg = "/nojournal/bin/performance-measurement-diagrams/time-phase-diagram/" + Img ;
    document.getElementById("picture").src = newImg;

    document.getElementById("highlight").innerText = Img ;

}







</script>



{% endblock %}

